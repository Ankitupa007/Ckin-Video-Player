/*! ckin v0.0.1 | (c) 2017  | MIT License | git+https://github.com/hunzaboy/ckin.git */
function browserSniff(){var e,t,n,o=(navigator.appVersion,navigator.userAgent),r=navigator.appName,i=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10);return navigator.appVersion.indexOf("Windows NT")!==-1&&navigator.appVersion.indexOf("rv:11")!==-1?(r="IE",i="11;"):(t=o.indexOf("MSIE"))!==-1?(r="IE",i=o.substring(t+5)):(t=o.indexOf("Chrome"))!==-1?(r="Chrome",i=o.substring(t+7)):(t=o.indexOf("Safari"))!==-1?(r="Safari",i=o.substring(t+7),(t=o.indexOf("Version"))!==-1&&(i=o.substring(t+8))):(t=o.indexOf("Firefox"))!==-1?(r="Firefox",i=o.substring(t+8)):(e=o.lastIndexOf(" ")+1)<(t=o.lastIndexOf("/"))&&(r=o.substring(e,t),i=o.substring(t+1),r.toLowerCase()==r.toUpperCase()&&(r=navigator.appName)),(n=i.indexOf(";"))!==-1&&(i=i.substring(0,n)),(n=i.indexOf(" "))!==-1&&(i=i.substring(0,n)),s=parseInt(""+i,10),isNaN(s)&&(i=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10)),[r,s]}function showControls(e){e.setAttribute("controls","controls")}function togglePlay(e,t){e[e.paused?"play":"pause"](),e.paused?t.classList.remove("is-playing"):t.classList.add("is-playing")}function updateButton(e,t){var n=e.paused?iconPlay:iconPause;t.forEach(function(e){return e.innerHTML=n})}function skip(){video.currentTime+=parseFloat(this.dataset.skip)}function toggleVolume(e,t){var n=e.volume?"0":"1",o=e.volume?iconMute:iconUnMute;e.volume=n,t.innerHTML=o}function handleRangeUpdate(){video[this.name]=this.value}function handleProgress(e,t){var n=e.currentTime/e.duration*100;t.style.flexBasis=n+"%"}function scrub(e,t,n){var o=e.offsetX/n.offsetWidth*t.duration;t.currentTime=o}function wrapPlayers(){document.querySelectorAll("video").forEach(function(e){var t=document.createElement("div");t.classList.add("ckin-player"),e.parentNode.insertBefore(t,e),t.appendChild(e)})}function buildControls(){var e=[];return e.push('<button class="ckin-player__button--big toggle" title="Toggle Play">'+iconPlay+"</button>"),e.push('<div class="ckin-player__controls">'),e.push('<button class="ckin-player__button toggle" title="Toggle Video">'+iconPlay+"</button>",'<div class="progress">','<div class="progress__filled"></div>',"</div>",'<button class="ckin-player__button volume" title="Volume">'+iconUnMute+"</button>"),e.push("</div>"),e.join("")}function attachSkin(e){return void 0!==e&&""!=e?e:"default"}!function(){function e(e){this.element=e}var t=function(e){return new RegExp("(^| )"+e+"( |$)")},n=function(e,t,n){for(var o=0;o<e.length;o++)t.call(n,e[o])};e.prototype={add:function(){n(arguments,function(e){this.contains(e)||(this.element.className+=" "+e)},this)},remove:function(){n(arguments,function(e){this.element.className=this.element.className.replace(t(e),"")},this)},toggle:function(e){return this.contains(e)?(this.remove(e),!1):(this.add(e),!0)},contains:function(e){return t(e).test(this.element.className)},replace:function(e,t){this.remove(e),this.add(t)}},"classList"in Element.prototype||Object.defineProperty(Element.prototype,"classList",{get:function(){return new e(this)}}),window.DOMTokenList&&null==DOMTokenList.prototype.replace&&(DOMTokenList.prototype.replace=e.prototype.replace)}(),function(){if("function"==typeof NodeList.prototype.forEach)return!1;NodeList.prototype.forEach=Array.prototype.forEach}();var obj={};obj.browserInfo=browserSniff(),obj.browserName=obj.browserInfo[0],obj.browserVersion=obj.browserInfo[1],wrapPlayers();var players=document.querySelectorAll(".ckin-player"),iconPlay='<i class="ckin-play"></i>',iconPause='<i class="ckin-pause"></i>',iconMute='<i class="ckin-mute"></i>',iconUnMute='<i class="ckin-unmute"></i>';players.forEach(function(e){var t=buildControls();e.insertAdjacentHTML("beforeend",t);var n=e.querySelector("video"),o=attachSkin(n.dataset.ckin);e.classList.add(o);var r=e.querySelector(".ckin-player__controls"),i=e.querySelector(".progress"),s=e.querySelector(".progress__filled"),a=e.querySelectorAll(".toggle"),l=(e.querySelectorAll("[data-skip]"),e.querySelectorAll(".ckin-player__slider"),e.querySelector(".volume"));"IE"!==obj.browserName||8!==obj.browserVersion&&9!==obj.browserVersion||(showControls(n),r.style.display="none"),n.addEventListener("click",function(){togglePlay(this,e)}),n.addEventListener("play",function(){updateButton(this,a)}),n.addEventListener("pause",function(){updateButton(this,a)}),n.addEventListener("timeupdate",function(){handleProgress(this,s)}),a.forEach(function(t){return t.addEventListener("click",function(){togglePlay(n,e)})}),l.addEventListener("click",function(){toggleVolume(n,l)});var u=!1;i.addEventListener("click",function(e){scrub(e,n,i)}),i.addEventListener("mousemove",function(e){return u&&scrub(e,n,i)}),i.addEventListener("mousedown",function(){return u=!0}),i.addEventListener("mouseup",function(){return u=!1})});